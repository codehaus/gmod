apply plugin: 'groovy'
apply plugin: 'maven'
apply plugin: 'signing'

// Set Maven coordinates
group = 'org.codehaus.groovy.modules.groovyfx'
archivesBaseName = "groovyfx"
version = '0.1-SNAPSHOT'

// Read environment and set properties
javafxHome = System.env['JAVAFX_HOME']
isRelease = !version.endsWith('SNAPSHOT')

sourceSets {
  main.groovy.srcDir 'src'
}

repositories {
    mavenCentral()
}

dependencies {
    groovy 'org.codehaus.groovy:groovy-all:1.8.0'
    compile files("${javafxHome}/rt/lib/jfxrt.jar")
}

new File('src/demo').eachFileMatch(~/.*Demo.groovy/) { file ->
    def taskName = file.name - '.groovy'
    task "$taskName"(type: JavaExec) {
        group = "Demo"
        description = "Run the $taskName program"
        main = "demo.$taskName"
        classpath sourceSets.main.runtimeClasspath
    }
}

